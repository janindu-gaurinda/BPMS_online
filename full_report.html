<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passenger Details</title>
    <link rel="icon" type="image/x-icon" href="img/BP_Icon.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <!-- DataTables Buttons CSS -->
    <link href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" rel="stylesheet">
    <!-- Your custom CSS -->
    <link href="boot/coustom.css" rel="stylesheet">


    <style>
        @font-face {
            font-family: 'Acumin Variable Concept';
            src: url('./assets/font/AcuminVariableConcept-WideExtraLight.ttf');
        }

        html,
        body {
            background: #ECF0F1;
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Acumin Variable Concept', sans-serif;
            overflow-y: hidden;
        }

        .page {
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: relative;
            overflow-y: auto;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .img_dashbord {
            height: auto;
            max-width: 80%;
        }

        .para_text_ {
            font-size: 15px;
        }
    </style>
</head>

<body>
    <div class="page">
        <div class="header">
            <nav class="navbar navbar-expand-lg nav-static">
                <div class="container-fluid">
                    <a class="navbar-brand" href="admin_dashboard.html">
                        <img src="img/BP_Header.png" alt="BP_Header" style="height: 50px;">
                    </a>

                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#staticNavbar" aria-controls="staticNavbar" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="staticNavbar">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item nav-item-center ps-2">
                                <h4 class="text-white mb-0" style="font-size: 25px;">Admin</h4>
                            </li>
                            <li class="nav-item nav-item-center ps-2">
                                <div class="nav-divider"></div>
                            </li>
                            <li class="nav-item nav-item-center text-center ps-2">
                                <div class="datetime-container text-white">
                                    <span id="static-date" style="font-size: 20px;"></span>
                                    <span id="static-time" style="font-size: 25px; font-weight: bold;"></span>
                                </div>
                            </li>
                            <li class="nav-item nav-item-center ps-2">
                                <div class="nav-divider"></div>
                            </li>
                            <li class="nav-item nav-item-center ps-2">
                                <img src="img/User.png" alt="User Icon" class="nav-img-icon">
                            </li>
                            <li class="nav-item nav-item-center ps-2">
                                <a href="index.html" onclick="return confirmLogout();">
                                    <img src="img/Logout.png" alt="Logout Icon" class="nav-img-icon">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <main class="content">
            <div class="container">
                <br>

                <div style='display: flex; justify-content: space-between'>
                    <h2><b>All Passenger Details</b></h2>
                    <a href='Report 2025-07-14.pdf' class='btn btn-primary' target="_blank">Download All Passenger
                        PDF</a>
                </div><br>

                <form method="POST" action="">
                    <div class="row mb-3">
                        <div class="col">
                            <label for="date_from" class="form-label">From Date:</label>
                            <input type="date" class="form-control" id="date_from" name="date_from" required value="">
                        </div>
                        <div class="col">
                            <label for="date_to" class="form-label">To Date:</label>
                            <input type="date" class="form-control" id="date_to" name="date_to" required value="">
                        </div>
                    </div>
                    <button type="submit" name="submit" class="btn btn-primary">Filter</button>
                    <a href="" class="btn btn-secondary">Clear Date Filter</a>
                </form>
                <hr>

                <table class='table table-striped cell-border' id="example" style='width:100%'>
                    <thead>
                        <tr class="align-middle">
                            <th class="text-center">ID</th>
                            <th class="text-center">Passenger Name</th>
                            <th class="text-center">From</th>
                            <th class="text-center">To</th>
                            <th class="text-center">Flight Num</th>
                            <th class="text-center">Date of Flight</th>
                            <th class="text-center">Seat Num</th>
                            <th class="text-center">Type</th>
                            <th class="text-center">P.Type</th>
                            <th class="text-center">#IV</th>
                            <th class="text-center">#PAX</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody class='table-group-divider text-uppercase'>
                        <!-- Repeat 10 Fake Rows -->
                        <!-- You can change values as needed -->
                        <!-- Row 1 to 10 -->
                        <!-- Begin Loop -->
                        <!-- Example: -->
                        <tr>
                            <td class="text-center align-middle">1</td>
                            <td class="text-center align-middle">John Doe</td>
                            <td class="text-center align-middle">CMB</td>
                            <td class="text-center align-middle">DXB</td>
                            <td class="text-center align-middle">EK123</td>
                            <td class="text-center align-middle">2025-08-01</td>
                            <td class="text-center align-middle">12A</td>
                            <td class="text-center align-middle">ECO</td>
                            <td class="text-center align-middle">PLAT</td>
                            <td class="text-center align-middle">3</td>
                            <td class="text-center align-middle">1</td>
                            <td class="text-center align-middle">
                                <div class="d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-secondary btn-sm me-2" data-bs-toggle="modal"
                                        data-bs-target="#passengerModal">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <a href="update_form_table.html" class="btn btn-success btn-sm me-2">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                    <a href="#" class="btn btn-danger btn-sm me-2" data-bs-toggle="tooltip"
                                        title="Delete" onclick="return confirm('Are you sure?');">
                                        <i class="bi bi-trash-fill"></i>
                                    </a>
                                    <a href="view_edit_history.html" class="btn btn-primary btn-sm"
                                        data-bs-toggle="tooltip" title="Update history">
                                        <i class="bi bi-clock-history"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                        <!-- Duplicate the row above with different fake data -->
                        <!-- Rows 2 to 10 -->
                        <tr>
                            <td class="text-center">2</td>
                            <td class="text-center">Jane Smith</td>
                            <td class="text-center">CMB</td>
                            <td class="text-center">SIN</td>
                            <td class="text-center">SQ456</td>
                            <td class="text-center">2025-08-02</td>
                            <td class="text-center">14C</td>
                            <td class="text-center">BUS</td>
                            <td class="text-center">GOLD</td>
                            <td class="text-center">2</td>
                            <td class="text-center">2</td>
                            <td class="text-center">
                                <div class="d-flex justify-content-center align-items-center"><button type="button"
                                        class="btn btn-secondary btn-sm me-2" data-bs-toggle="modal"
                                        data-bs-target="#passengerModal"><i class="bi bi-eye"></i></button><a
                                        href="update_form_table.html" class="btn btn-success btn-sm me-2"><i
                                            class="bi bi-pencil-square"></i></a><a href="#"
                                        class="btn btn-danger btn-sm me-2" onclick="return confirm('Are you sure?');"><i
                                            class="bi bi-trash-fill"></i></a><a href="view_edit_history.html"
                                        class="btn btn-primary btn-sm"><i class="bi bi-clock-history"></i></a></div>
                            </td>
                        </tr>

                        <tr>
                            <td class="text-center">3</td>
                            <td class="text-center">Michael Lee</td>
                            <td class="text-center">CMB</td>
                            <td class="text-center">LHR</td>
                            <td class="text-center">BA789</td>
                            <td class="text-center">2025-08-03</td>
                            <td class="text-center">10D</td>
                            <td class="text-center">ECO</td>
                            <td class="text-center">SILVER</td>
                            <td class="text-center">1</td>
                            <td class="text-center">3</td>
                            <td class="text-center">
                                <div class="d-flex justify-content-center align-items-center"><button type="button"
                                        class="btn btn-secondary btn-sm me-2" data-bs-toggle="modal"
                                        data-bs-target="#passengerModal"><i class="bi bi-eye"></i></button><a
                                        href="update_form_table.html" class="btn btn-success btn-sm me-2"><i
                                            class="bi bi-pencil-square"></i></a><a href="#"
                                        class="btn btn-danger btn-sm me-2" onclick="return confirm('Are you sure?');"><i
                                            class="bi bi-trash-fill"></i></a><a href="view_edit_history.html"
                                        class="btn btn-primary btn-sm"><i class="bi bi-clock-history"></i></a></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-center">4</td>
                            <td class="text-center">Janindu Gaurinda</td>
                            <td class="text-center">CMB</td>
                            <td class="text-center">LHR</td>
                            <td class="text-center">BA789</td>
                            <td class="text-center">2025-08-03</td>
                            <td class="text-center">11A</td>
                            <td class="text-center">ECO</td>
                            <td class="text-center">GOLD</td>
                            <td class="text-center">1</td>
                            <td class="text-center">3</td>
                            <td class="text-center">
                                <div class="d-flex justify-content-center align-items-center"><button type="button"
                                        class="btn btn-secondary btn-sm me-2" data-bs-toggle="modal"
                                        data-bs-target="#passengerModal"><i class="bi bi-eye"></i></button><a
                                        href="update_form_table.html" class="btn btn-success btn-sm me-2"><i
                                            class="bi bi-pencil-square"></i></a><a href="#"
                                        class="btn btn-danger btn-sm me-2" onclick="return confirm('Are you sure?');"><i
                                            class="bi bi-trash-fill"></i></a><a href="view_edit_history.html"
                                        class="btn btn-primary btn-sm"><i class="bi bi-clock-history"></i></a></div>
                            </td>
                        </tr>

                        <!-- Repeat for rows 4 to 10 similarly... -->
                        <!-- Copy-paste and adjust fake data -->
                        <!-- End Loop -->
                    </tbody>
                </table>

                <!-- Shared Modal -->
                <div class='modal fade' id='passengerModal' tabindex='-1' aria-labelledby='passengerModalLabel'
                    aria-hidden='true'>
                    <div class='modal-dialog'>
                        <div class='modal-content'>
                            <div class='modal-header'>
                                <h5 class='modal-title' id='passengerModalLabel'>Passenger Details</h5>
                                <button type='button' class='btn-close' data-bs-dismiss='modal'
                                    aria-label='Close'></button>
                            </div>
                            <div class='modal-body'>
                                <p><strong>ID:</strong> 1</p>
                                <p><strong>Passenger Name:</strong> John Doe</p>
                                <p><strong>From City:</strong> CMB</p>
                                <p><strong>To City:</strong> DXB</p>
                                <p><strong>Flight Number:</strong> EK123</p>
                                <p><strong>Date of Flight:</strong> 2025-08-01</p>
                                <p><strong>Seat Number:</strong> 12A</p>
                                <p><strong>No of IV:</strong> 3</p>
                                <p><strong>No of PAX:</strong> 1</p>
                                <p><strong>Captured Date:</strong> 2025-07-22</p>
                                <p><strong>Captured Time:</strong> 10:30</p>
                                <p><strong>Type:</strong> PLAT</p>
                                <p><strong>Pax Type:</strong> ECO</p>
                                <p><strong>Entered by:</strong> admin</p>
                                <p><strong>Last updated by:</strong> admin</p>
                                <p><strong>Last update time:</strong> 2025-07-22 10:35</p>
                                <p><strong>Remarks:</strong> On time</p>
                            </div>
                        </div>
                    </div>
                </div>

                <br>
                <br>
                <br>

            </div>
        </main>
        <footer class="footer-static-wrapper text-center">
            <div class="footer-static-text">
                Design & Develop by AASL IT
            </div>
        </footer>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Popper and Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
    <!-- DataTables Buttons JS -->
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>
    <!-- Your custom JS -->
    <script src="boot/coustom.js"></script>
    <!-- Your custom JS -->
    <script src="boot/coustom.js"></script>

    <script>
        $(document).ready(function () {
            $('#example').DataTable({
                dom: 'Bfrtip',
                buttons: [{
                    extend: 'pdf',
                    responsive: true,
                    title: 'Report 2025-07-14',
                    orientation: 'landscape',
                    pageSize: 'A4',
                    exportOptions: {
                        columns: [1, 4, 5, 6, 7, 8, 9, 10]
                    },
                    customize: function (doc) {
                        doc.content[1].table.widths = ['25%', '20%', '15%', '12%', '10%', '10%', '5%', '5%'];
                        doc.content[1].table.body[0].forEach(cell => {
                            cell.alignment = 'center';
                            cell.fontSize = 12;
                            cell.bold = true;
                            cell.border = [true, true, true, true];
                        });
                        doc.content[1].table.body.forEach(row => {
                            row.forEach(cell => {
                                cell.alignment = 'center';
                                cell.fontSize = 12;
                                cell.margin = [0, 0, 0, 5];
                                cell.border = [true, true, true, true];
                                cell.text = String(cell.text).toUpperCase();
                            });
                        });

                        // ================= Calculate totals ==================
                        let totalSum = 0;
                        let lastColumnIndex = doc.content[1].table.body[0].length - 1;

                        doc.content[1].table.body.slice(1).forEach(row => {
                            let value = parseFloat(row[lastColumnIndex].text) || 0;
                            totalSum += value;
                        });

                        let total_C_Count = 0;
                        let total_A_Count = 0;
                        let total_AC_Count = 0;

                        doc.content[1].table.body.slice(1).forEach(row => {
                            if (row[4].text === 'CHILD') {
                                total_C_Count++;
                            } else if (row[4].text === 'ADULT') {
                                total_A_Count++;
                            } else if (row[4].text === 'ADULT & CHILD') {
                                total_AC_Count++;
                            }
                        });

                        doc.content.push({
                            text: `Total Number of Passengers: ${totalSum}`,
                            alignment: 'left',
                            fontSize: 12,
                            bold: true,
                            margin: [10, 30, 0, 0]
                        });
                        doc.content.push({
                            text: `Total Adult Count: ${total_A_Count}`,
                            alignment: 'left',
                            fontSize: 12,
                            bold: true,
                            margin: [10, 10, 0, 0]
                        });
                        doc.content.push({
                            text: `Total Child Count: ${total_C_Count}`,
                            alignment: 'left',
                            fontSize: 12,
                            bold: true,
                            margin: [10, 10, 0, 0]
                        });
                        doc.content.push({
                            text: `Total Adult & Child Count: ${total_AC_Count}`,
                            alignment: 'left',
                            fontSize: 12,
                            bold: true,
                            margin: [10, 10, 0, 0]
                        });

                        // =============== Header block ===================
                        doc.content.unshift({
                            stack: [
                                {
                                    text: 'User: John Doe',
                                    style: 'headeruser',
                                    alignment: 'right',
                                },
                                {
                                    text: 'Airport & Aviation Services (Sri Lanka) (Private) Limited',
                                    style: 'headerLarge',
                                    bold: true
                                },
                                {
                                    text: 'Araliya Lounge',
                                    style: 'headerMedium',
                                    bold: true
                                }
                            ],
                            alignment: 'center',
                            margin: [0, 0, 0, 20]
                        });

                        // =============== Footer ===================
                        doc.footer = function (currentPage, pageCount) {
                            return {
                                stack: [
                                    {
                                        text: 'Copyright Â© 2010 Airport & Aviation (Sri Lanka) Limited. All rights reserved.',
                                        alignment: 'left',
                                        style: 'footerStyle1',
                                        margin: [10, 0, 0, 2]
                                    },
                                    {
                                        columns: [
                                            {
                                                text: 'Powered by IT Division',
                                                alignment: 'left',
                                                style: 'footerStyle2',
                                                margin: [10, 0, 0, 0]
                                            },
                                            {
                                                text: 'Page ' + currentPage + ' of ' + pageCount,
                                                alignment: 'right',
                                                style: 'footerStyle2',
                                                margin: [0, 0, 10, 0]
                                            }
                                        ]
                                    }
                                ],
                                margin: [10, 0, 10, 10]
                            };
                        };

                        doc.styles = {
                            headeruser: {
                                fontSize: 10,
                                margin: [0, 0, 0, 10]
                            },
                            headerLarge: {
                                fontSize: 16,
                                margin: [0, 0, 0, 10]
                            },
                            headerMedium: {
                                fontSize: 14,
                                margin: [0, 0, 0, 10]
                            },
                            headerSmall: {
                                fontSize: 12,
                                margin: [0, 0, 0, 20]
                            },
                            footerStyle1: {
                                fontSize: 9,
                                bold: true
                            },
                            footerStyle2: {
                                fontSize: 9,
                                italics: true
                            }
                        };
                    }
                }, 'copy', 'csv', 'excel', 'print']
            });
        });

        function confirmAction() {
            return confirm("Are you sure you want to delete this data?");
        }
    </script>

</body>

</html>